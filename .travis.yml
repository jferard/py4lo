# py4lo
dist: bionic
language: python

python:
  - "3.7"

cache: pip

before_install:
  - sudo aptitude install -y libreoffice libreoffice-script-provider-python python3-uno uno-libs3
  - export PYTHONPATH=${PYTHONPATH}:/usr/lib/python3/dist-packages

# command to run tests and install dependencies
install:
  - pip install --upgrade pip
  - pip install --upgrade setuptools
  - pip install https://files.pythonhosted.org/packages/a2/12/ced7105d2de62fa7c8fb5fce92cc4ce66b57c95fb875e9318dba7f8c5db0/toml-0.10.0-py2.py3-none-any.whl
  # for coverage
  - pip install pytest py codecov pytest-cov
  - pytest --version # pytest-cov

  # dependencies
  - pip install -r requirements.txt

# script
script:
  - pytest --cov=py4lo test

after_success:
  - codecov
