# py4lo
dist: xenial
language: python

python:
  - "3.7"

cache: pip

before_install:
  - sudo aptitude install -y libreoffice libreoffice-script-provider-python python3-uno python3 uno-libs3
  - export PYTHONPATH=${PYTHONPATH}:/usr/lib/python3/dist-packages

# command to run tests and install dependencies
install:
  - sudo pip install https://files.pythonhosted.org/packages/a2/12/ced7105d2de62fa7c8fb5fce92cc4ce66b57c95fb875e9318dba7f8c5db0/toml-0.10.0-py2.py3-none-any.whl
  # for coverage
  - sudo pip install codecov
  - sudo pip install pytest-cov

  # dependencies
  - sudo pip install -r requirements.txt

# script
script:
  - python3.7 -m pytest --cov=py4lo test

after_success:
  - codecov
